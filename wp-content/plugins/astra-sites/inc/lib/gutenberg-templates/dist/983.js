"use strict";(self.webpackChunkast_block_templates=self.webpackChunkast_block_templates||[]).push([[983],{6983:function(e,t,r){r.r(t),r.d(t,{default:function(){return E}});var o=r(5711),s=r(9576),a=r(7363),l=r(6048),n=r(573),c=r(1359),i=r(9344),u=r(10),p=a.forwardRef((function({title:e,titleId:t,...r},o){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:o,"aria-labelledby":t},r),e?a.createElement("title",{id:t},e):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"}))})),d=r(6486),m=r(2154),g=r(972);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},f.apply(this,arguments)}const{site_url:y}=ast_block_template_vars;var b=(0,o.Z)((0,s.Z)((e=>{const{getFilterBlocksByCategory:t,getFilterBlocksPagesByCategory:r}=e("ast-block-templates");return{filterBlocksByCategory:t(),filterBlocksPagesByCategory:r()}})),(0,i.Z)((e=>{const{setFavorites:t,setFilterBlocksByCategory:r,setFilterBlocksPagesByCategory:o}=e("ast-block-templates");return{setFavorites:t,setFilterBlocksByCategory:r,setFilterBlocksPagesByCategory:o}})))((e=>{let{item:t,className:r,setFavorites:o,setFilterBlocksByCategory:s,filterBlocksByCategory:n,filterBlocksPagesByCategory:i,setFilterBlocksPagesByCategory:b,...h}=e;const{favorites:v,currentScreen:k}=(0,c.Z)((e=>{const{getFavorites:t,getCurrentScreen:r}=e("ast-block-templates");return{favorites:t(),currentScreen:r()}})),w="all-blocks-grid"===k?"block":"page",[E,_]=(0,a.useState)(v[w]?.includes(+t.ID));return React.createElement("button",f({className:(0,l.AK)("flex items-center justify-center rounded-full p-2 bg-white cursor-pointer border-0 focus:outline-none",E?"":"text-icon-secondary",r),onClick:async e=>{e?.preventDefault(),e?.stopPropagation();try{await(0,u.Z)({path:`${y}/wp-json/gutenberg-templates/v1/favorite`,data:{type:t.type,block_id:t.ID,status:!E},method:"POST",headers:{"X-WP-Nonce":ast_block_template_vars.rest_api_nonce,"content-type":"application/json"}})}catch(e){console.error(e)}let r={...v};r=E?{...v,[w]:v[w].filter((e=>e!==(0,d.parseInt)(t.ID)))}:{...v,[w]:[...new Set([...v[w],(0,d.parseInt)(t.ID)])]},_(!E),o(r),r[w].length||"favorite"!==n&&"favorite"!==i||("block"===w&&s(""),"page"===w&&b(""),m.Z.emit("reset-list-count"))}},h),React.createElement(g.Z,{content:!E&&"Add to favorites"},React.createElement(p,{className:(0,l.AK)("w-6 h-6 transition-colors ease-out duration-150",E?"fill-favorite text-favorite":"hover:fill-favorite hover:text-favorite")})))}));const h=e=>{const t=["skip","logo","fav-icon"];for(const r of t)if(e.includes(r))return!0;return!1};var v=r(1665);const{spectra_common_styles:k}=ast_block_template_vars,w="visible";var E=(0,o.Z)((0,s.Z)((e=>{const{getDisableAi:t,getDisablePreview:r}=e("ast-block-templates");return{disableAi:t(),disablePreview:r()}})))((0,a.memo)((e=>{let{item:t,content:r,stylesheet:o,astraCustomizer:s,globalStylesheet:c,colorPalette:i,dynamicContent:u,selectedImages:p,disableAi:d,email:m,phone:g,address:f}=e;const y=(0,a.useRef)(null),E=(0,a.useRef)(null),_=t["thumbnail-image-url"]||"",B=t["featured-image-url"]||"";let C=0,x=0;const[R,$]=(0,a.useState)({importing:!1}),[N,S]=(0,a.useState)(`${ast_block_template_vars.uri}dist/placeholder_200_200.png`),[I,P]=(0,a.useState)(`${ast_block_template_vars.uri}dist/placeholder_200_200.png`);function A(){const e=y?.current,t=E?.current;if(!e||!t)return;const r=e.parentNode.offsetWidth/1200,o=r*t.offsetHeight;e.style.transform=`scale(${r})`,e.style.height=`${o}px`}(0,a.useLayoutEffect)((()=>{let e=!0;const a={landscape:[],portrait:[]};p?.forEach((e=>{"landscape"===e.orientation?a.landscape.push(e):a.portrait.push(e)}));const l=a,n=new Image;n.src=_;const y=new Image;y.src=B;const b=E.current;function v(t,r){e&&(t.onload=()=>{r(t.src)})}v(n,S),v(y,P);const R=document.getElementById("astra-wp-editor-styles-inline-css")?.textContent.replace(/:root/g,".block-container").replace(/body/g,".block-container"),$=document.getElementById("astra-block-editor-styles-inline-css")?.textContent.replace(/:root/g,".block-container").replace(/body/g,".block-container");let N="";var I,T,Z;if(o&&(I=o,T=l?.landscape,o=d||T&&0===T.length?I:I.replace(/background-image\s*:\s*url\(['"]?([^'")]+)['"]?\)/g,(function(e,t){if(h(t))return e;if(!T[C]?.url)return"";const r=T[C]?.url;return C++,'background-image: url("'+r+'")'}))),N+=s?`<style type="text/css" id="gt-astra-customizer">${s}</style>`:"",N+=`<style type="text/css" id="gt-spectra-common-stylesheet">${k}</style>`,N=o?`${N} <style type="text/css" id="gt-common-stylesheet">${o}</style>`:N,c&&(N+=`<style type="text/css" id="gt-global-stylesheet"> ${c} </style>`),R&&(N+=`<style type="text/css" id="gt-wpeditor-css" > ${R} </style>`),$&&(N+=`<style type="text/css" id="gt-blockeditor-css"> ${$} </style>`),b&&r){let e=b.shadowRoot;if(null===e&&(e=b.attachShadow({mode:"open"})),null===e)return;let o=r;if(!d){const e=u?u[t.category]:[];e&&Object.keys(e)?.length>0&&Object.keys(e).forEach((t=>{o=null!==e[t]?o.replace(t,e[t]):o})),Z=o,m&&(Z=Z.replace("contact@example.com",m)),g&&(Z=Z.replace("202-555-0188",g)),f&&(Z=Z.replace("2360 Hood Avenue, San Diego, CA, 92123",f)),o=Z,o=j(o)}e.innerHTML=N+o,i.forEach(((t,r)=>{e?.host.style.setProperty(`--ast-global-color-${r}`,t)}));const s=b.shadowRoot.querySelectorAll("div")[0];s?.classList.add("st-block-container");const a=b.shadowRoot.querySelectorAll("img");e&&(a.forEach((e=>{h(e.src)||d||0===l.landscape.length||0===l.portrait.length||F(e,"hidden")})),A(),((e,t)=>{if(d)return;const r=t.landscape?t.landscape:[],o=t.portrait?t.portrait:[];0!==r.length&&0!==o.length&&e?.forEach((function(e){h(e.src)||(e.onload=()=>{const t=(e=>{const t=new Image;return t.src=e,t.width>t.height?"landscape":"portrait"})(e.src);let s;if(s="landscape"===t?r[C]:o[x],void 0!==s)if(s.url.includes("unsplash")||s.url.includes("pexels")||s.url.includes("pixabay")){if("landscape"===t?C++:x++,"PICTURE"===e.parentNode.nodeName)e.parentNode.querySelectorAll("source").forEach((e=>{e.setAttribute("srcset",s.optimized_url)})),e.parentNode.querySelector("img").setAttribute("src",s.optimized_url);else{const t=document.createElement("img");t.src=s.optimized_url,e.parentNode.replaceChild(t,e)}F(e,w)}else F(e,w);else F(e,w)},e.onerror=()=>{F(e,w)})}))})(a,l))}return()=>{e=!1}}),[t,d,u]),(0,a.useEffect)((()=>{const e=new ResizeObserver(A);return e.observe(document.documentElement),()=>{e&&e.disconnect()}}),[]),(0,a.useEffect)((()=>{const e=document.querySelector("#ast-block-templates-modal-wrap");if(!e)return;const t=new MutationObserver(A);return t.observe(e,{childList:!0,attributes:!0,subtree:!0}),()=>{t&&t.disconnect()}}),[]),(0,a.useEffect)((()=>{const e=E?.current;if(e){const t=e.shadowRoot;i.forEach(((e,r)=>{null!==t&&t.host.style.setProperty(`--ast-global-color-${r}`,e)}))}}),[i]);const F=(e,t)=>{e&&(e.style.visibility=t)},j=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return f?e.replace(/(<iframe[^>]+src="https:\/\/maps\.google\.com\/maps\?q=)([^&]+)(&z=\d+&hl=en&t=m&output=embed&iwloc=near"[^>]*><\/iframe>)/g,`$1${encodeURIComponent(f)}$3`):e};let T=0,Z=0;const O=(e,t,r)=>{const o=e.scrollTop,s=t-o;let a=0;const l=function(){a+=20;const t=v.Z.linearTween(a,o,s,r);e.scrollTop=t,a<r&&(T=setTimeout(l,20))};l()};return React.createElement("div",{className:(0,l.AK)("w-full h-fit p-5",!0===R.importing?"importing":"")},React.createElement("div",{className:"cursor-pointer relative border border-solid border-border-primary hover:border-accent-spectra transition duration-150 ease-in-out overflow-hidden group"},React.createElement("div",{className:"thumbnail left-0 m-0 min-h-[auto] overflow-visible text-left top-0 origin-top-left relative pointer-events-none",ref:y},React.createElement("div",{className:"absolute w-[1200px] pointer-events-none max-h-[1600px] overflow-hidden",ref:E},!r&&React.createElement("img",{srcSet:`${I}, ${N}`,src:N,alt:"Preview"}),React.createElement("div",{className:"preview"},React.createElement("span",{className:"ast-block-templates-icon ast-block-templates-icon-search"})))),React.createElement("div",{className:"absolute inset-0 grid grid-cols-1 grid-rows-1 place-items-end",onMouseEnter:()=>{const e=E.current;T&&clearTimeout(T),Z=setTimeout((()=>{O(e,e.scrollHeight,4e3)}),1e3)},onMouseLeave:()=>{Z&&clearTimeout(Z);const e=E.current;T&&clearTimeout(T),O(e,0,1500)}},React.createElement("div",{className:(0,l.AK)("opacity-0 group-hover:opacity-100 w-full flex items-center justify-between px-[20px] py-[14px] backdrop-blur-sm bg-white/[0.85] shadow-action-buttons transition-all duration-150 ease-in-out",!0===R.importing?"opacity-100":"")},React.createElement(n.Z,{title:"Insert",liveRequest:!0,item:t,importing:R.importing,onClick:()=>{$({...R,importing:!0})},onBlockImport:()=>{$({...R,importing:!1})}}),React.createElement(b,{item:t})))))})))}}]);