<<<<<<< HEAD
"use strict";(self.webpackChunkast_block_templates=self.webpackChunkast_block_templates||[]).push([[509],{2509:function(e,t,a){a.r(t),a.d(t,{default:function(){return C}});var o=a(5711),r=a(5940),s=a(7363),n=a(7009),l=a(5302),c=a(1882),i=a(8096),p=a(5868),m=a(4142),u=a(9148),d=a(6128),g=a(1569),b=a(5622),f=s.forwardRef((function({title:e,titleId:t,...a},o){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:o,"aria-labelledby":t},a),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"}))})),h=a(8680),y=a(6042),k=a(7712),v=a(6302),w=a(1890);const{post:I}=wp.ajax,{parse:_}=wp.blocks;var P=(0,o.Z)((0,r.Z)((e=>{const{getImportItemInfo:t,getCurrentScreen:a,getSitePreview:o,getActiveBlockPaletteSlug:r,getActivePagePaletteSlug:s,getDisableAi:n,getAdaptiveMode:l}=e("ast-block-templates");return{importItemInfo:t(),sitePreview:o(),currentScreen:a(),activeBlockPaletteSlug:r(),activePagePaletteSlug:s(),disableAI:n(),adaptiveMode:l()}})),(0,i.Z)((e=>{const{setImportItemInfo:t,setTogglePopup:a,setOnboardingAiPopup:o}=e("ast-block-templates"),{insertBlocks:r}=wp.data.dispatch("core/block-editor");return{setImportItemInfo:t,onSetTogglePopup:a,insertBlocks:r,setOnboardingAiPopup:o}})))((0,s.memo)((e=>{let{setImportItemInfo:t,requiredPlugins:a,importItemInfo:o,title:r,btnClass:i,insertBlocks:P,onSetTogglePopup:E,item:S,onClick:x,onBlockImport:A,activeBlockPaletteSlug:R,activePagePaletteSlug:N,currentScreen:O,disableAI:C,importing:T=!1,adaptiveMode:$,showIcon:j=!0}=e,[B]=(0,s.useState)(o),Z=a||[];const L=i||"",[D]=(0,s.useState)(r||"Import"),{index:q}=wp.data.select("core/block-editor").getBlockInsertionPoint(),{importInProgress:M,stepData:z,syncLibNotice:F,skipZipAIOnboarding:W}=(0,l.Z)((e=>{const{getImportInProgress:t,getAIStepData:a,getNotice:o,getSkipZipAIOnboarding:r}=e(v.L);return{importInProgress:t(),stepData:a(),syncLibNotice:o(),skipZipAIOnboarding:r()}}),[]),{setImportInProgress:H,setSpecAiTogglePopup:K}=(0,c.Z)(v.L),Q="info"===F?.type,U=(0,n.gt)(),V=(e,t,a)=>{(0,y.Am)((0,k.Z)({title:e,message:t}),k.Z.getOptions({type:a}))},G=async()=>{try{await(0,u.j)({slug:"ultimate-addons-for-gutenberg",init:"ultimate-addons-for-gutenberg/ultimate-addons-for-gutenberg.php",name:"Spectra"})}catch(e){H(!1),V("Import failed!","Spectra activation failed!","error")}},J=()=>{(0,u.j)({slug:"wpforms-lite",init:"wpforms-lite/wpforms.php",name:"WPForms Lite"}).then((()=>{te()})).catch((()=>{H(!1),V("Import failed!","WPForms activation failed!","error")}))},X=()=>{const e=B.original_content,t="all-blocks-grid"===O?"block":"page",a="block"===t?B["blocks-category"][0]:B["pages-category"][0];I({action:"ast_block_templates_import_block",content:e,category:a,_ajax_nonce:ast_block_template_vars._ajax_nonce,style:"all-blocks-grid"===O?R:N,disableAI:C,block_type:t,adaptiveMode:$}).done((e=>{H(!1);const t=(0,n.CN)(_(e));P(t,q,"",!1),Y(t[0].clientId),E(),document.getElementById("ast-block-templates-modal-wrap").classList.remove("open"),document.body.classList.remove("ast-block-templates-modal-open"),(U.inactive||U.notInstalled)&&(0,b.iP)(),"function"==typeof A&&A(e,q)})).fail((()=>{H(!1),V("Import failed!","Failed to import the block. Please try again later or contact support for assistance.","error")}))},Y=e=>{e&&setTimeout((()=>{const t=ee(),a="block-"+e,o=t.getElementById(a);o&&o.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}),2500)},ee=()=>{const e=document.getElementsByClassName("is-tablet-preview"),t=document.getElementsByClassName("is-mobile-preview");if(0!==e.length||0!==t.length){const a=e[0]||t[0];let o=!1;a&&(o=a.getElementsByTagName("iframe")[0]);const r=o?.contentWindow.document||o?.contentDocument;if(r)return r}return document},te=()=>{B?.["post-meta"]?.["astra-site-wpforms-path"]||""?I({action:"ast_block_templates_import_wpforms",id:B.id,_ajax_nonce:ast_block_template_vars._ajax_nonce}).done((()=>{X()})).fail((()=>{H(!1),V("Import failed!","WPForms import failed!","error")})):X()};return W?React.createElement(p.Z,{className:(0,n.AK)("min-w-[4.875rem] h-7 hover:shadow-small sp-text-sm",L,(M&&!T||Q)&&"opacity-50 cursor-not-allowed"),type:"button",variant:"primary",onClick:async e=>{M||Q||(H(!0),"function"==typeof x&&x(e),U.notInstalled?await(async()=>{try{await(0,u.H)({slug:"ultimate-addons-for-gutenberg",init:"ultimate-addons-for-gutenberg/ultimate-addons-for-gutenberg.php",name:"Spectra"}),await G()}catch(e){H(!1),V("Import failed!","Spectra installation failed!","error")}})():U.inactive&&await G(),(0,g.I)(S.ID,"astra-blocks").then((e=>{t(e),B=e,Z=e?.["post-meta"]?.["astra-blocks-required-plugins"]?d.t.parse(e["post-meta"]["astra-blocks-required-plugins"]):[],Z.length?"not-installed"===ast_block_template_vars.wpforms_status?(0,u.H)({slug:"wpforms-lite",init:"wpforms-lite/wpforms.php",name:"WPForms Lite"}).then((()=>{J()})).catch((()=>{H(!1),V("Import failed!","WPForms installation failed!","error")})):"inactive"===ast_block_template_vars.wpforms_status?J():te():te()})).catch((e=>{V("Import failed!",e,"error"),H(!0)})))},isSmall:!0,hasPrefixIcon:!T&&j},T?React.createElement(m.Z,{className:"h-4 w-4 !shrink-0"}):React.createElement(React.Fragment,null,j&&React.createElement(h.Z,{className:"h-4 w-4 !shrink-0"}),React.createElement("span",{className:"truncate"},D))):React.createElement(p.Z,{className:(0,n.AK)("font-sans min-w-[4.75rem] h-7 hover:shadow-small sp-text-sm py-1 pl-2 pr-3 gap-1",L),type:"button",variant:"primary",onClick:()=>{K(),(0,n.jw)("ast-import",{blockId:S.ID,blockType:S.type,blockPaletteSlug:R,pagePaletteSlug:N})},isSmall:!0,hasPrefixIcon:!0},React.createElement(React.Fragment,null,React.createElement(f,{className:"h-4 w-4 !shrink-0"}),(0,w.__)("Insert","ast-block-templates")))}))),E=a(168);const S=e=>{const t=["skip","logo","fav-icon"];for(const a of t)if(e.includes(a))return!0;return!1},x={linearTween(e,t,a,o){return a*e/o+t},easeInQuad(e,t,a,o){return a*(e/=o)*e+t},easeOutQuad(e,t,a,o){return-a*(e/=o)*(e-2)+t},easeInOutQuad(e,t,a,o){return(e/=o/2)<1?a/2*e*e+t:-a/2*(--e*(e-2)-1)+t},easeInCubic(e,t,a,o){return a*(e/=o)*e*e+t},easeOutCubic(e,t,a,o){return e/=o,a*(--e*e*e+1)+t},easeInOutCubic(e,t,a,o){return(e/=o/2)<1?a/2*e*e*e+t:a/2*((e-=2)*e*e+2)+t}};Object.seal(x);var A=x;const{spectra_common_styles:R,is_rtl:N}=ast_block_template_vars,O="visible";var C=(0,o.Z)((0,r.Z)((e=>{const{getDisableAi:t,getDisablePreview:a,getTogglePopup:o}=e("ast-block-templates");return{disableAi:t(),disablePreview:a(),togglePopup:o()}})))((0,s.memo)((e=>{let{item:t,content:a,stylesheet:o,astraCustomizer:r,globalStylesheet:l,colorPalette:c,dynamicContent:i,selectedImages:p,disableAi:m,togglePopup:u,email:d,phone:g,address:b}=e;const f=(0,s.useRef)(null),h=(0,s.useRef)(null),y=t["thumbnail-image-url"]||"",k=t["featured-image-url"]||"",v=(0,n.gt)();let w=0,I=0,_=0;const[x,C]=(0,s.useState)({importing:!1}),[T,$]=(0,s.useState)(`${ast_block_template_vars.uri}dist/placeholder_200_200.png`),[j,B]=(0,s.useState)(`${ast_block_template_vars.uri}dist/placeholder_200_200.png`);function Z(){const e=f?.current,t=h?.current;if(!e||!t)return;const a=e.parentNode.offsetWidth/1200,o=a*t.offsetHeight;e.style.transform=`scale(${a})`,e.style.height=`${o}px`}(0,s.useLayoutEffect)((()=>{let e=!0;const s={landscape:[],portrait:[]};p?.forEach((e=>{"landscape"===e.orientation?s.landscape.push(e):s.portrait.push(e)}));const n=s,u=new Image;u.src=y;const f=new Image;f.src=k;const v=h.current;function P(t,a){e&&(t.onload=()=>{a(t.src)})}P(u,$),P(f,B);const E=document.getElementById("astra-wp-editor-styles-inline-css")?.textContent.replace(/:root/g,".block-container").replace(/body/g,".block-container"),x=document.getElementById("astra-block-editor-styles-inline-css")?.textContent.replace(/:root/g,".block-container").replace(/body/g,".block-container");let A="";var N,C,T;if(o&&(N=o,C=n?.landscape,o=m?N:0!==Object.keys(i).length&&i.hasOwnProperty(t.category)?C&&0===C.length?N:N.replace(/background-image\s*:\s*url\(['"]?([^'")]+)['"]?\)/g,(function(e,t){if(S(t))return e;if(!C[_]?.url)return"";const a=C[_]?.url;return _++,_%=C.length,'background-image: url("'+a+'")'})):N),A+=r?`<style type="text/css" id="gt-astra-customizer">${r}</style>`:"",A+=`<style type="text/css" id="gt-spectra-common-stylesheet">${R}</style>`,A=o?`${A} <style type="text/css" id="gt-common-stylesheet">${o}</style>`:A,l&&(A+=`<style type="text/css" id="gt-global-stylesheet"> ${l} </style>`),E&&(A+=`<style type="text/css" id="gt-wpeditor-css" > ${E} </style>`),x&&(A+=`<style type="text/css" id="gt-blockeditor-css"> ${x} </style>`),v&&a){let e=v.shadowRoot;if(null===e&&(e=v.attachShadow({mode:"open"})),null===e)return;let o=a;if(!m){const e=i?i[t.category]:[];e&&Object.keys(e)?.length>0&&Object.keys(e).forEach((t=>{o=null!==e[t]?o.replace(t,e[t]):o})),Object.keys(i).length>0&&i.hasOwnProperty(t.category)&&(T=o,d&&(T=T.replace("contact@example.com",d)),g&&(T=T.replace("202-555-0188",g)),b&&(T=T.replace("2360 Hood Avenue, San Diego, CA, 92123",b)),o=T,o=D(o))}e.innerHTML=A+'<div class="st-block-container">'+o+"</div>",c.forEach(((t,a)=>{e?.host.style.setProperty(`--ast-global-color-${a}`,t)}));const r=v.shadowRoot.querySelectorAll("img");e&&(r.forEach((e=>{S(e.src)||m||0===n.landscape.length||0===n.portrait.length||0===Object.keys(i).length||!i.hasOwnProperty(t.category)||L(e,"hidden")})),Z(),((e,a)=>{if(m)return;if(0===Object.keys(i).length||!i.hasOwnProperty(t.category))return;const o=a.landscape?a.landscape:[],r=a.portrait?a.portrait:[];0!==o.length&&0!==r.length&&e?.forEach((function(e,t){S(e.src)||(e.onload=()=>{const a=e.getAttribute("src")||"";if(a.includes("unsplash")||a.includes("pexels")||a.includes("pixabay"))return void L(e,O);const s=(e=>{const t=new Image;return t.src=e,t.width>t.height?"landscape":"portrait"})(e.src);let n;if(w=t%o.length,I=t%r.length,n="landscape"===s?o[w]:r[I],void 0!==n)if(n.url.includes("unsplash")||n.url.includes("pexels")||n.url.includes("pixabay")){if("landscape"===s?(w++,w%=o.length):(I++,I%=r.length),"PICTURE"===e.parentNode.nodeName)e.parentNode.querySelectorAll("source").forEach((e=>{e.setAttribute("srcset",n.optimized_url)})),e.parentNode.querySelector("img").setAttribute("src",n.optimized_url);else{const t=document.createElement("img");t.src=n.optimized_url,e.parentNode.replaceChild(t,e)}L(e,O)}else L(e,O);else L(e,O)},e.onerror=()=>{L(e,O)})}))})(r,n))}return()=>{e=!1}}),[t,m,i,p]),(0,s.useEffect)((()=>{const e=new ResizeObserver(Z);return e.observe(document.documentElement),()=>{e&&e.disconnect()}}),[]),(0,s.useEffect)((()=>{const e=document.querySelector("#ast-block-templates-modal-wrap");if(!e)return;const t=new MutationObserver(Z);return t.observe(e,{childList:!0,attributes:!0,subtree:!0}),()=>{t&&t.disconnect()}}),[]),(0,s.useEffect)((()=>{const e=h?.current;if(e){const t=e.shadowRoot;c.forEach(((e,a)=>{null!==t&&t.host.style.setProperty(`--ast-global-color-${a}`,e)}))}}),[c]);const L=(e,t)=>{e&&(e.style.visibility=t)},D=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return b?e.replace(/(<iframe[^>]+src="https:\/\/maps\.google\.com\/maps\?q=)([^&]+)(&z=\d+&hl=en&t=m&output=embed&iwloc=near"[^>]*><\/iframe>)/g,`$1${encodeURIComponent(b)}$3`):e};let q=0,M=0;const z=(e,t,a)=>{const o=e.scrollTop,r=t-o;let s=0;const n=function(){s+=20;const t=A.linearTween(s,o,r,a);e.scrollTop=t,s<a&&(q=setTimeout(n,20))};n()};(0,s.useEffect)((()=>{u||(w=0,I=0,_=0)}),[u]);const F=N?"origin-top-right":"origin-top-left";return React.createElement("div",{className:(0,n.AK)("w-full h-fit p-5",!0===x.importing?"importing":"")},React.createElement("div",{className:(0,n.AK)("cursor-pointer relative border border-solid border-border-primary hover:border-accent-spectra transition duration-150 ease-in-out overflow-hidden group",x.importing&&"border-accent-spectra")},React.createElement("div",{className:`thumbnail left-0 m-0 min-h-[auto] overflow-visible text-left top-0 ${F} relative pointer-events-none`,ref:f},React.createElement("div",{className:"absolute w-[1200px] pointer-events-none max-h-[1600px] overflow-hidden",ref:h},!a&&React.createElement("img",{srcSet:`${j}, ${T}`,src:T,alt:"Preview"}),React.createElement("div",{className:"preview"},React.createElement("span",{className:"ast-block-templates-icon ast-block-templates-icon-search"})))),React.createElement("div",{className:"absolute inset-0 grid grid-cols-1 grid-rows-1 place-items-end",onMouseEnter:()=>{if("page"!==t.type)return;const e=h.current;q&&clearTimeout(q),M=setTimeout((()=>{z(e,e.scrollHeight,4e3)}),1e3)},onMouseLeave:()=>{M&&clearTimeout(M);const e=h.current;q&&clearTimeout(q),z(e,0,1500)}},React.createElement("div",{className:(0,n.AK)("opacity-0 group-hover:opacity-100 w-full flex items-center justify-between px-3 py-2 backdrop-blur-sm bg-white/[0.85] shadow-action-buttons transition-all duration-150 ease-in-out",!0===x.importing?"opacity-100":"")},React.createElement(P,{title:v.notInstalled?"Install Spectra & Insert":v.inactive?"Activate Spectra & Insert":"Insert",showIcon:v.active,liveRequest:!0,item:t,importing:x.importing,onClick:()=>{C({...x,importing:!0})},onBlockImport:()=>{C({...x,importing:!1})}}),React.createElement(E.Z,{item:t})))))})))}}]);
=======
"use strict";(self.webpackChunkast_block_templates=self.webpackChunkast_block_templates||[]).push([[509],{2509:function(e,t,o){o.r(t),o.d(t,{default:function(){return O}});var a=o(5711),r=o(5940),s=o(7363),n=o(7009),l=o(5302),c=o(1882),i=o(8096),p=o(5868),m=o(4142),u=o(9148),d=o(6128),g=o(1569),b=o(5622),f=s.forwardRef((function({title:e,titleId:t,...o},a){return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true",ref:a,"aria-labelledby":t},o),e?s.createElement("title",{id:t},e):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 10.5V6.75a4.5 4.5 0 10-9 0v3.75m-.75 11.25h10.5a2.25 2.25 0 002.25-2.25v-6.75a2.25 2.25 0 00-2.25-2.25H6.75a2.25 2.25 0 00-2.25 2.25v6.75a2.25 2.25 0 002.25 2.25z"}))})),h=o(8680),y=o(1277),v=o(7712),k=o(6302),w=o(1890);const{post:I}=wp.ajax,{parse:_}=wp.blocks;var P=(0,a.Z)((0,r.Z)((e=>{const{getImportItemInfo:t,getCurrentScreen:o,getSitePreview:a,getActiveBlockPaletteSlug:r,getActivePagePaletteSlug:s,getDisableAi:n,getAdaptiveMode:l}=e("ast-block-templates");return{importItemInfo:t(),sitePreview:a(),currentScreen:o(),activeBlockPaletteSlug:r(),activePagePaletteSlug:s(),disableAI:n(),adaptiveMode:l()}})),(0,i.Z)((e=>{const{setImportItemInfo:t,setTogglePopup:o,setOnboardingAiPopup:a}=e("ast-block-templates"),{insertBlocks:r}=wp.data.dispatch("core/block-editor");return{setImportItemInfo:t,onSetTogglePopup:o,insertBlocks:r,setOnboardingAiPopup:a}})))((0,s.memo)((e=>{let{setImportItemInfo:t,requiredPlugins:o,importItemInfo:a,title:r,btnClass:i,insertBlocks:P,onSetTogglePopup:E,item:S,onClick:x,onBlockImport:R,activeBlockPaletteSlug:A,activePagePaletteSlug:N,currentScreen:C,disableAI:O,importing:T=!1,adaptiveMode:$,showIcon:j=!0}=e,[B]=(0,s.useState)(a),L=o||[];const Z=i||"",[D]=(0,s.useState)(r||"Import"),{index:q}=wp.data.select("core/block-editor").getBlockInsertionPoint(),{importInProgress:M,stepData:z,syncLibNotice:F}=(0,l.Z)((e=>{const{getImportInProgress:t,getAIStepData:o,getNotice:a}=e(k.L);return{importInProgress:t(),stepData:o(),syncLibNotice:a()}}),[]),{setImportInProgress:W,setSpecAiTogglePopup:H}=(0,c.Z)(k.L),K="info"===F?.type,Q=(0,n.gt)(),U=(e,t,o)=>{(0,y.Am)((0,v.Z)({title:e,message:t}),v.Z.getOptions({type:o}))},V=async()=>{try{await(0,u.j)({slug:"ultimate-addons-for-gutenberg",init:"ultimate-addons-for-gutenberg/ultimate-addons-for-gutenberg.php",name:"Spectra"})}catch(e){W(!1),U("Import failed!","Spectra activation failed!","error")}},G=()=>{(0,u.j)({slug:"wpforms-lite",init:"wpforms-lite/wpforms.php",name:"WPForms Lite"}).then((()=>{ee()})).catch((()=>{W(!1),U("Import failed!","WPForms activation failed!","error")}))},J=()=>{const e=B.original_content,t="all-blocks-grid"===C?"block":"page",o="block"===t?B["blocks-category"][0]:B["pages-category"][0];I({action:"ast_block_templates_import_block",content:e,category:o,_ajax_nonce:ast_block_template_vars._ajax_nonce,style:"all-blocks-grid"===C?A:N,disableAI:O,block_type:t,adaptiveMode:$}).done((e=>{W(!1);const t=(0,n.CN)(_(e));P(t,q,"",!1),X(t[0].clientId),E(),document.getElementById("ast-block-templates-modal-wrap").classList.remove("open"),document.body.classList.remove("ast-block-templates-modal-open"),(Q.inactive||Q.notInstalled)&&(0,b.iP)(),"function"==typeof R&&R(e,q)})).fail((()=>{W(!1),U("Import failed!","Failed to import the block. Please try again later or contact support for assistance.","error")}))},X=e=>{e&&setTimeout((()=>{const t=Y(),o="block-"+e,a=t.getElementById(o);a&&a.scrollIntoView({behavior:"smooth",block:"center",inline:"center"})}),2500)},Y=()=>{const e=document.getElementsByClassName("is-tablet-preview"),t=document.getElementsByClassName("is-mobile-preview");if(0!==e.length||0!==t.length){const o=e[0]||t[0];let a=!1;o&&(a=o.getElementsByTagName("iframe")[0]);const r=a?.contentWindow.document||a?.contentDocument;if(r)return r}return document},ee=()=>{B?.["post-meta"]?.["astra-site-wpforms-path"]||""?I({action:"ast_block_templates_import_wpforms",id:B.id,_ajax_nonce:ast_block_template_vars._ajax_nonce}).done((()=>{J()})).fail((()=>{W(!1),U("Import failed!","WPForms import failed!","error")})):J()};return z.token?React.createElement(p.Z,{className:(0,n.AK)("min-w-[4.875rem] h-7 hover:shadow-small sp-text-sm",Z,(M&&!T||K)&&"opacity-50 cursor-not-allowed"),type:"button",variant:"primary",onClick:async e=>{M||K||(W(!0),"function"==typeof x&&x(e),Q.notInstalled?await(async()=>{try{await(0,u.H)({slug:"ultimate-addons-for-gutenberg",init:"ultimate-addons-for-gutenberg/ultimate-addons-for-gutenberg.php",name:"Spectra"}),await V()}catch(e){W(!1),U("Import failed!","Spectra installation failed!","error")}})():Q.inactive&&await V(),(0,g.I)(S.ID,"astra-blocks").then((e=>{t(e),B=e,L=e?.["post-meta"]?.["astra-blocks-required-plugins"]?d.t.parse(e["post-meta"]["astra-blocks-required-plugins"]):[],L.length?"not-installed"===ast_block_template_vars.wpforms_status?(0,u.H)({slug:"wpforms-lite",init:"wpforms-lite/wpforms.php",name:"WPForms Lite"}).then((()=>{G()})).catch((()=>{W(!1),U("Import failed!","WPForms installation failed!","error")})):"inactive"===ast_block_template_vars.wpforms_status?G():ee():ee()})).catch((e=>{U("Import failed!",e,"error"),W(!0)})))},isSmall:!0,hasPrefixIcon:!T&&j},T?React.createElement(m.Z,{className:"h-4 w-4 !shrink-0"}):React.createElement(React.Fragment,null,j&&React.createElement(h.Z,{className:"h-4 w-4 !shrink-0"}),React.createElement("span",{className:"truncate"},D))):React.createElement(p.Z,{className:(0,n.AK)("min-w-[7rem] hover:shadow-small sp-text-sm",Z),type:"button",variant:"primary",onClick:()=>{H(),(0,n.jw)("ast-import",{blockId:S.ID,blockType:S.type,blockPaletteSlug:A,pagePaletteSlug:N})},isSmall:!0,hasPrefixIcon:!0},React.createElement(React.Fragment,null,React.createElement(f,{className:"h-4 w-4 !shrink-0"}),(0,w.__)("Insert","ast-block-templates")))}))),E=o(168);const S=e=>{const t=["skip","logo","fav-icon"];for(const o of t)if(e.includes(o))return!0;return!1},x={linearTween(e,t,o,a){return o*e/a+t},easeInQuad(e,t,o,a){return o*(e/=a)*e+t},easeOutQuad(e,t,o,a){return-o*(e/=a)*(e-2)+t},easeInOutQuad(e,t,o,a){return(e/=a/2)<1?o/2*e*e+t:-o/2*(--e*(e-2)-1)+t},easeInCubic(e,t,o,a){return o*(e/=a)*e*e+t},easeOutCubic(e,t,o,a){return e/=a,o*(--e*e*e+1)+t},easeInOutCubic(e,t,o,a){return(e/=a/2)<1?o/2*e*e*e+t:o/2*((e-=2)*e*e+2)+t}};Object.seal(x);var R=x;const{spectra_common_styles:A,is_rtl:N}=ast_block_template_vars,C="visible";var O=(0,a.Z)((0,r.Z)((e=>{const{getDisableAi:t,getDisablePreview:o,getTogglePopup:a}=e("ast-block-templates");return{disableAi:t(),disablePreview:o(),togglePopup:a()}})))((0,s.memo)((e=>{let{item:t,content:o,stylesheet:a,astraCustomizer:r,globalStylesheet:l,colorPalette:c,dynamicContent:i,selectedImages:p,disableAi:m,togglePopup:u,email:d,phone:g,address:b}=e;const f=(0,s.useRef)(null),h=(0,s.useRef)(null),y=t["thumbnail-image-url"]||"",v=t["featured-image-url"]||"",k=(0,n.gt)();let w=0,I=0,_=0;const[x,O]=(0,s.useState)({importing:!1}),[T,$]=(0,s.useState)(`${ast_block_template_vars.uri}dist/placeholder_200_200.png`),[j,B]=(0,s.useState)(`${ast_block_template_vars.uri}dist/placeholder_200_200.png`);function L(){const e=f?.current,t=h?.current;if(!e||!t)return;const o=e.parentNode.offsetWidth/1200,a=o*t.offsetHeight;e.style.transform=`scale(${o})`,e.style.height=`${a}px`}(0,s.useLayoutEffect)((()=>{let e=!0;const s={landscape:[],portrait:[]};p?.forEach((e=>{"landscape"===e.orientation?s.landscape.push(e):s.portrait.push(e)}));const n=s,u=new Image;u.src=y;const f=new Image;f.src=v;const k=h.current;function P(t,o){e&&(t.onload=()=>{o(t.src)})}P(u,$),P(f,B);const E=document.getElementById("astra-wp-editor-styles-inline-css")?.textContent.replace(/:root/g,".block-container").replace(/body/g,".block-container"),x=document.getElementById("astra-block-editor-styles-inline-css")?.textContent.replace(/:root/g,".block-container").replace(/body/g,".block-container");let R="";var N,O,T;if(a&&(N=a,O=n?.landscape,a=m?N:0!==Object.keys(i).length&&i.hasOwnProperty(t.category)?O&&0===O.length?N:N.replace(/background-image\s*:\s*url\(['"]?([^'")]+)['"]?\)/g,(function(e,t){if(S(t))return e;if(!O[_]?.url)return"";const o=O[_]?.url;return _++,_%=O.length,'background-image: url("'+o+'")'})):N),R+=r?`<style type="text/css" id="gt-astra-customizer">${r}</style>`:"",R+=`<style type="text/css" id="gt-spectra-common-stylesheet">${A}</style>`,R=a?`${R} <style type="text/css" id="gt-common-stylesheet">${a}</style>`:R,l&&(R+=`<style type="text/css" id="gt-global-stylesheet"> ${l} </style>`),E&&(R+=`<style type="text/css" id="gt-wpeditor-css" > ${E} </style>`),x&&(R+=`<style type="text/css" id="gt-blockeditor-css"> ${x} </style>`),k&&o){let e=k.shadowRoot;if(null===e&&(e=k.attachShadow({mode:"open"})),null===e)return;let a=o;if(!m){const e=i?i[t.category]:[];e&&Object.keys(e)?.length>0&&Object.keys(e).forEach((t=>{a=null!==e[t]?a.replace(t,e[t]):a})),Object.keys(i).length>0&&i.hasOwnProperty(t.category)&&(T=a,d&&(T=T.replace("contact@example.com",d)),g&&(T=T.replace("202-555-0188",g)),b&&(T=T.replace("2360 Hood Avenue, San Diego, CA, 92123",b)),a=T,a=D(a))}e.innerHTML=R+'<div class="st-block-container">'+a+"</div>",c.forEach(((t,o)=>{e?.host.style.setProperty(`--ast-global-color-${o}`,t)}));const r=k.shadowRoot.querySelectorAll("img");e&&(r.forEach((e=>{S(e.src)||m||0===n.landscape.length||0===n.portrait.length||0===Object.keys(i).length||!i.hasOwnProperty(t.category)||Z(e,"hidden")})),L(),((e,o)=>{if(m)return;if(0===Object.keys(i).length||!i.hasOwnProperty(t.category))return;const a=o.landscape?o.landscape:[],r=o.portrait?o.portrait:[];0!==a.length&&0!==r.length&&e?.forEach((function(e,t){S(e.src)||(e.onload=()=>{const o=e.getAttribute("src")||"";if(o.includes("unsplash")||o.includes("pexels")||o.includes("pixabay"))return void Z(e,C);const s=(e=>{const t=new Image;return t.src=e,t.width>t.height?"landscape":"portrait"})(e.src);let n;if(w=t%a.length,I=t%r.length,n="landscape"===s?a[w]:r[I],void 0!==n)if(n.url.includes("unsplash")||n.url.includes("pexels")||n.url.includes("pixabay")){if("landscape"===s?(w++,w%=a.length):(I++,I%=r.length),"PICTURE"===e.parentNode.nodeName)e.parentNode.querySelectorAll("source").forEach((e=>{e.setAttribute("srcset",n.optimized_url)})),e.parentNode.querySelector("img").setAttribute("src",n.optimized_url);else{const t=document.createElement("img");t.src=n.optimized_url,e.parentNode.replaceChild(t,e)}Z(e,C)}else Z(e,C);else Z(e,C)},e.onerror=()=>{Z(e,C)})}))})(r,n))}return()=>{e=!1}}),[t,m,i,p]),(0,s.useEffect)((()=>{const e=new ResizeObserver(L);return e.observe(document.documentElement),()=>{e&&e.disconnect()}}),[]),(0,s.useEffect)((()=>{const e=document.querySelector("#ast-block-templates-modal-wrap");if(!e)return;const t=new MutationObserver(L);return t.observe(e,{childList:!0,attributes:!0,subtree:!0}),()=>{t&&t.disconnect()}}),[]),(0,s.useEffect)((()=>{const e=h?.current;if(e){const t=e.shadowRoot;c.forEach(((e,o)=>{null!==t&&t.host.style.setProperty(`--ast-global-color-${o}`,e)}))}}),[c]);const Z=(e,t)=>{e&&(e.style.visibility=t)},D=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return b?e.replace(/(<iframe[^>]+src="https:\/\/maps\.google\.com\/maps\?q=)([^&]+)(&z=\d+&hl=en&t=m&output=embed&iwloc=near"[^>]*><\/iframe>)/g,`$1${encodeURIComponent(b)}$3`):e};let q=0,M=0;const z=(e,t,o)=>{const a=e.scrollTop,r=t-a;let s=0;const n=function(){s+=20;const t=R.linearTween(s,a,r,o);e.scrollTop=t,s<o&&(q=setTimeout(n,20))};n()};(0,s.useEffect)((()=>{u||(w=0,I=0,_=0)}),[u]);const F=N?"origin-top-right":"origin-top-left";return React.createElement("div",{className:(0,n.AK)("w-full h-fit p-5",!0===x.importing?"importing":"")},React.createElement("div",{className:(0,n.AK)("cursor-pointer relative border border-solid border-border-primary hover:border-accent-spectra transition duration-150 ease-in-out overflow-hidden group",x.importing&&"border-accent-spectra")},React.createElement("div",{className:`thumbnail left-0 m-0 min-h-[auto] overflow-visible text-left top-0 ${F} relative pointer-events-none`,ref:f},React.createElement("div",{className:"absolute w-[1200px] pointer-events-none max-h-[1600px] overflow-hidden",ref:h},!o&&React.createElement("img",{srcSet:`${j}, ${T}`,src:T,alt:"Preview"}),React.createElement("div",{className:"preview"},React.createElement("span",{className:"ast-block-templates-icon ast-block-templates-icon-search"})))),React.createElement("div",{className:"absolute inset-0 grid grid-cols-1 grid-rows-1 place-items-end",onMouseEnter:()=>{if("page"!==t.type)return;const e=h.current;q&&clearTimeout(q),M=setTimeout((()=>{z(e,e.scrollHeight,4e3)}),1e3)},onMouseLeave:()=>{M&&clearTimeout(M);const e=h.current;q&&clearTimeout(q),z(e,0,1500)}},React.createElement("div",{className:(0,n.AK)("opacity-0 group-hover:opacity-100 w-full flex items-center justify-between px-3 py-2 backdrop-blur-sm bg-white/[0.85] shadow-action-buttons transition-all duration-150 ease-in-out",!0===x.importing?"opacity-100":"")},React.createElement(P,{title:k.notInstalled?"Install Spectra & Insert":k.inactive?"Activate Spectra & Insert":"Insert",showIcon:k.active,liveRequest:!0,item:t,importing:x.importing,onClick:()=>{O({...x,importing:!0})},onBlockImport:()=>{O({...x,importing:!1})}}),React.createElement(E.Z,{item:t})))))})))}}]);
>>>>>>> 3374e473fe3e06a7dc8885c83835c023d5565fb9
